<?xml version="1.0" encoding="UTF-8"?>
<ExternalCredential xmlns="http://soap.sforce.com/2006/04/metadata">
    <authenticationProtocol>Oauth</authenticationProtocol>
    <authenticationProtocolVariant>JwtBearerTokenExchange</authenticationProtocolVariant>
    <label>AuthKit</label>
    <externalCredentialParameters>
        <parameterName>SigningCertificate</parameterName>
        <parameterType>SigningCertificate</parameterType>
        <parameterValue>AuthKit</parameterValue>
    </externalCredentialParameters>
    <externalCredentialParameters>
        <parameterName>iss</parameterName>
        <parameterType>JwtBodyClaim</parameterType>
        <parameterValue>{!$ConnectedApp.AuthKit.ConsumerKey}</parameterValue>
    </externalCredentialParameters>
    <externalCredentialParameters>
        <parameterName>sub</parameterName>
        <parameterType>JwtBodyClaim</parameterType>
        <parameterValue>{!$User.Username}</parameterValue>
    </externalCredentialParameters>
    <externalCredentialParameters>
        <parameterName>aud</parameterName>
        <parameterType>JwtBodyClaim</parameterType>
        <parameterValue>_ORG_DOMAIN_</parameterValue>
    </externalCredentialParameters>
    <externalCredentialParameters>
        <parameterName>Identity Provider URL</parameterName>
        <parameterType>AuthProviderUrl</parameterType>
        <parameterValue>_ORG_DOMAIN_/services/oauth2/token</parameterValue>
    </externalCredentialParameters>
    <externalCredentialParameters>
        <parameterName>Scope</parameterName>
        <parameterType>AuthParameter</parameterType>
        <parameterValue>api refresh_token</parameterValue>
    </externalCredentialParameters>
</ExternalCredential> 